<%- include ../partials/header.html %>

<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<!------ Include the above in your HEAD tag ---------->
<div class="driveradd">
<div class="container"  >
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div class="well well-sm">

        
            <form action="/driver/adddriver" method="POST" novalidate enctype="multipart/form-data" autocomplete="off">
                <input type="hidden" name="_id" value="<%= driver._id %>" >
                <h2><b><%= viewTitle %></h2><hr style="color:cornflowerblue; border:solid">

            
                <div   class="row">
                    <div class="col-md-6">
                        <div class="form-group field">
                            <label>Full Name*</label>
                            <input type="text" class="form-control" name="fullName" value="<%= driver ? driver.fullName : '' %>" required="required">
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group field">
                            <label>Mobile*</label>
                            <input type="text" class="form-control" name="user_mobile"  value="<%= driver ? driver.user_mobile : '' %>" required="required">
                        </div>
                    </div>
                        
                    <div class="col-md-6">
                        <div class="form-group ">
                            <label>Email</label>
                            <input type="text" class="form-control" name="email"  value="<%= driver ? driver.email : '' %>">                       
                        </div>
                    </div>

                   

                    <div class="col-md-6">
                        <div class="form-group  ">
                            <label>Driver No</label>
                            <input type="text" class="form-control" name="dl_no"  value="<%= driver ? driver.dl_no : '' %>">
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group  ">
                            <label>Driver Expiry Date</label>
                            <input type="date" class="form-control" name="dl_expiry" value="<%= driver ? driver.dl_expiry : '' %>">                         
                        </div>
                    </div>

                    
                    <div class="col-md-6">
                            <div class="form-group  ">
                                <label>Date of Birth</label>
                                <input type="date" class="form-control" name="dob"  value="<%= driver ? driver.dob : '' %>">                      
                            </div>
                        </div>

                    <div class="col-md-6">
                            <div class="form-group  ">
                                <label>Date of Joining</label>
                                <input type="date" class="form-control" name="doj" value="<%= driver ? driver.doj : '' %>">                    
                            </div>
                        </div>

                        
                    <div class="col-md-6">
                            <div class="form-group  ">
                                <label>Adhaar Card</label>
                                <input type="text" class="form-control" name="adhaar_card" id="adhaar_card" onblur="AadharValidate();" value="<%= driver ? driver.adhaar_card : '' %>">                   
                            </div>
                        </div>

                    <div class="col-md-6">
                            <div class="form-group  ">
                                <label>Username</label>
                                <input type="text" class="form-control" name="username"  value="<%= driver ? driver.username : '' %>">
                   
                            </div>
                        </div>

                    <div class="col-md-6">
                            <div class="form-group">
                                <label>Permanent Address</label>
                                <textarea rows="6" cols="6" type="text" id="permanent_address" name="permanent_address"   class="form-control " ><%= driver ? driver.permanent_address : '' %></textarea>
                            </div>
                        </div>

                    <div class="col-md-6">
                            <div class="form-group  ">
                                <label>Present Address</label><br>
                                <textarea rows="6" cols="6" type="text" id="present_address" name="present_address"  class="form-control"  ><%= driver ? driver.present_address : '' %></textarea>
                                <input type="checkbox" name="checkadd" onclick="filladdress(this.form)"<p> Same as Permanent Address </p>
                            </div>
                                   
                        </div>

                    <div class="col-md-12">
                            <div class="form-group ">
                                <div class="animate_form">
                                    <div class="imageupload">                
                                        <div  class="file-tab">
                                        <label>Image</label>
                                        <input type="file" class="form-control" id="user_image" name="user_image" accept="image/*" onchange="loadFile()"  value="<%= driver ? driver.user_image : '' %>" >                    
                                        <img id="output"<% if(driver){ if(driver.user_image==null)
                                            {%> src="<%= baseurl %>myimages/no_image.jpg"<% }else{ %> src="<%= baseurl %>/uploads/<%= driver.user_image %>"<% } }else{ %> src=""<% } %> style=" max-width: 100px; max-height: 100px; border:solid"/>
                                    </div>
                                </div>
                            </div>  
                        </div>
                    </div>                        
                                    
             
                    <div class="col-md-12">
                            <button type="submit" class="btn btn-primary pull-right"><i class="fa fa-database"></i> Submit</button>
                            <a class="btn btn-secondary" href="/driver/list"><i class="fa fa-list-alt"></i> View All</a>
                        </div>
                    </div>
                </form>
                </div>
           
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="clearfix"></div>
    </div>
   
    <%- include ../partials/footer.html %>
    <%- include ../formvalidator/formvalidator.html %>


    <script type="text/javascript">
        function AadharValidate() {
            var aadhar = document.getElementById("adhaar_card").value;
            var adharcardTwelveDigit = /^\d{12}$/;
            var adharSixteenDigit = /^\d{16}$/;
            if (aadhar != '') {
                if (aadhar.match(adharcardTwelveDigit)) {
                    return true;
                }
                else if (aadhar.match(adharSixteenDigit)) {
                    return true;
                }
                else {
                    alert("Enter valid Aadhar Number");
                    return false;
                }
            }
        }
    </script>
    
    <script>
    function filladdress(f) {
      if(f.checkadd.checked == true) {
        f.present_address.value = f.permanent_address.value;
       
      }
    }
    </script>
    <script>
      function loadFile()  {
        var fileInput = document.getElementById('user_image');
        var filePath = fileInput.value;
        var allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;
      if(!allowedExtensions.exec(filePath)){
          alert('Please upload file having extensions .jpeg/.jpg/.png  only.');
          fileInput.value = '';
          return false;
      }else{
          //Image preview
          if (fileInput.files && fileInput.files[0]) {
            var reader = new FileReader();             
              reader.onload = function(){
                var output = document.getElementById('output');
                output.src = reader.result;
              };
              reader.readAsDataURL(event.target.files[0]);
            
            };
      }
      }
          </script>

        
    

    